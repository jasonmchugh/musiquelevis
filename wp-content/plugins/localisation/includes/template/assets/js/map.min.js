jQuery(document).ready(function(e){var o,n;e("body"),e("#options");e("#map__canvas").length>0&&google.maps.event.addDomListener(window,"load",function(){function a(){for(e=0;e<d.length;e++)d[e].close();for(var e=0;e<m.length;e++)m[e].setIcon(v)}function t(o){var n,t=new google.maps.LatLng(o._latitude,o._longitude);o.marker=new google.maps.Marker({position:t,map:i,animation:google.maps.Animation.DROP,title:o._title,icon:v,zIndex:2}),o.marker.set("marker_id",o._id),c.addMarker(o.marker),m.push(o.marker),o._phone.replace(/\(|\)|\-| /g,""),o.infowindow=new google.maps.InfoWindow({pixelOffset:new google.maps.Size(210,130),content:'<div class="infowindow__heading">'+o._title+'</div><div class="infowindow__content">'+o._address+'<a href="'+o._slug+'">Plus d’info »</a></div>'}),d.push(o.infowindow),o.marker.addListener("click",function(){a(),o.marker.setIcon(z),o.infowindow.open(i,o.marker)}),google.maps.event.addListener(o.marker,"click",function(){i.panTo(t)}),n='<div class="retailer"><a href="'+o._slug+'">'+o._title+"</a></p></div>",e("#retailers").append(n),e(".map__loading").fadeOut("slow"),u.extend(t),setTimeout(function(){i.fitBounds(u)},0)}var i,s=[{textColor:"white",url:"/wp-content/plugins/localisation/includes/template/assets/img/m1.png",height:53,width:53}],l=29,p=l/2,r=40,g=!0,d=[],m=[],c={},u=(e("#view-map"),new google.maps.LatLngBounds);o&&(g=!1,p=(l=29)/2,r=40),n&&(p=(l=29)/2,r=40);var _=new google.maps.LatLng(45.47443,-73.699438),w=(new google.maps.InfoWindow,[{stylers:[{hue:"#bbbbbb"},{saturation:-100},{lightness:0},{gamma:1}]}]),f={zoom:5,center:_,scrollwheel:!1,panControl:!1,panControlOptions:{position:google.maps.ControlPosition.TOP_RIGHT},zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.TOP_LEFT},mapTypeControl:!1,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP]},draggable:g,disableDefaultUI:!0,mapTypeId:"custom"};i=new google.maps.Map(document.getElementById("map__canvas"),f);var h={styles:s};c=new MarkerClusterer(i,[],h);var v={url:"/wp-content/plugins/localisation/includes/template/assets/img/pin.png",size:new google.maps.Size(l,r),scaledSize:new google.maps.Size(l,r),anchor:new google.maps.Point(p,r)},y=[],T={name:"N&B"},k=new google.maps.StyledMapType(w,T),z={url:"/wp-content/plugins/localisation/includes/template/assets/img/pin-active.png",size:new google.maps.Size(l,r),scaledSize:new google.maps.Size(l,r),anchor:new google.maps.Point(p,r)};i.mapTypes.set("custom",k),e.ajax({url:bravad.ajax_url,method:"GET",dataType:"json",data:{action:"map_points",page_id:bravad.post_id},success:function(e,o,n){for(a=0;a<e.length;a++)y[a]={_latitude:e[a]._lat,_longitude:e[a]._lng,_address:e[a]._address,_phone:e[a]._phone,_email:e[a]._email,_title:e[a]._title,_slug:e[a]._slug};for(var a=0;a<e.length;a++)t(y[a]);setTimeout(function(){i.fitBounds(u)},0)},error:function(e,o,n){console.log(n)}})})});